{% extends "base.html" %}
{% load static %}

{% block title %}GDPR Requests Cheat Sheet{% endblock %}

{% block content %}
<div class="container dark-opaque my-5 py-4 px-3 px-md-5 rounded-4 shadow-lg">
  <h1 class="text-gold mb-4 text-center">GDPR Requests Cheat Sheet</h1>
  <p class="small text-light-50 mb-4 text-center">
    Quick staff reference for handling user data/privacy requests.<br>
    <strong>Last Updated: 26 June 2025</strong>
  </p>

  <div class="ps-2 mb-4">
    <h4 class="text-gold mb-3">What is a GDPR Request?</h4>
    <div>
      Users (customers, staff, partners) can request access to, correction of, or deletion of their personal data, or object to how we use it.
    </div>
  </div>

  <div class="ps-2 mb-4">
    <h4 class="text-gold mb-3">Types of Requests</h4>
    <div class="ps-3">
      <div class="mb-2"><span class="fw-semibold text-warning">1. Data Access:</span>  
        User asks to see what personal data we hold about them.
      </div>
      <div class="mb-2"><span class="fw-semibold text-warning">2. Data Correction:</span>  
        User wants to correct inaccurate data (e.g., wrong email, phone, address).
      </div>
      <div class="mb-2"><span class="fw-semibold text-warning">3. Data Deletion (“Right to be Forgotten”):</span>  
        User asks for their account/data to be deleted (unless we must keep it for legal reasons).
      </div>
      <div class="mb-2"><span class="fw-semibold text-warning">4. Data Portability:</span>  
        User wants a copy of their data in a readable format (CSV, JSON, PDF).
      </div>
      <div><span class="fw-semibold text-warning">5. Objection/Restriction:</span>  
        User objects to marketing or data processing, or asks for processing to stop.
      </div>
    </div>
  </div>

  <div class="ps-2 mb-4">
    <h4 class="text-gold mb-3">How to Respond</h4>
    <div class="ps-3">
      <div class="mb-2">Acknowledge the request ASAP (within 1 business day).</div>
      <div class="mb-2">Verify the requester’s identity before sharing, correcting, or deleting data.</div>
      <div class="mb-2">Inform management or your data privacy lead if you are unsure.</div>
      <div class="mb-2">Handle the request within 30 days (or sooner).</div>
      <div>Keep a record of the request and your response (email or system note).</div>
    </div>
  </div>

  <div class="ps-2 mb-4">
    <h4 class="text-gold mb-3">Sample Response Template</h4>
    <div class="bg-black bg-opacity-75 p-3 rounded-3 mb-2">
      <div class="small text-light-50 mb-2">Copy and adapt for emails:</div>
      <div class="ps-3">
        <div>Subject: <span class="text-warning">Your Data Privacy Request – DS Property Maintenance</span></div>
        <div class="mt-2">Hello [Name],</div>
        <div class="mt-2">
          Thank you for your request regarding your personal data.
          <br><br>
          We are processing your request and will reply within 30 days. If we need further information to verify your identity or clarify your request, we will contact you.
          <br><br>
          If you have any questions, please reply to this email.
        </div>
        <div class="mt-3">Best regards,<br>DS Property Maintenance Data Protection Team</div>
      </div>
    </div>
  </div>

  <div class="ps-2 mb-4">
    <h4 class="text-gold mb-3">Important Reminders</h4>
    <div class="ps-3">
      <div>Never share personal data without verifying identity.</div>
      <div>If unsure or the request is complex, escalate to your manager.</div>
      <div>All staff must follow this process for every GDPR-related request.</div>
      <div>Record all requests for audit and compliance.</div>
    </div>
  </div>

  <hr class="border-gold opacity-75">

  <!-- GDPR Request Button -->
  <div class="text-center mb-4">
    <button type="button" class="btn btn-glass-gold btn-lg px-4" data-bs-toggle="modal" data-bs-target="#gdprRequestModal">
      Submit GDPR Request
    </button>
  </div>

  <!-- GDPR Request Modal -->
  <div class="modal fade" id="gdprRequestModal" tabindex="-1" aria-labelledby="gdprRequestModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <form method="post" action="{% url 'gdpr_request' %}" id="gdprRequestForm">
        {% csrf_token %}
        <div class="modal-content bg-dark text-light border-gold">
          <div class="modal-header border-0">
            <h5 class="modal-title text-gold" id="gdprRequestModalLabel">Submit GDPR Request</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="mb-3">
              <label for="requestName" class="form-label text-gold">Full Name</label>
              <input type="text" class="form-control" name="name" id="requestName" required>
            </div>
            <div class="mb-3">
              <label for="requestEmail" class="form-label text-gold">Email Address</label>
              <input type="email" class="form-control" name="email" id="requestEmail" required>
            </div>
            <div class="mb-3 text-gold">Request Type (tick all that apply):</div>
            <div class="form-check ms-2">
              <input class="form-check-input" type="checkbox" value="Access" id="gdprAccess" name="request_types">
              <label class="form-check-label" for="gdprAccess">Access my data</label>
            </div>
            <div class="form-check ms-2">
              <input class="form-check-input" type="checkbox" value="Correction" id="gdprCorrection" name="request_types">
              <label class="form-check-label" for="gdprCorrection">Correct my data</label>
            </div>
            <div class="form-check ms-2">
              <input class="form-check-input" type="checkbox" value="Deletion" id="gdprDeletion" name="request_types">
              <label class="form-check-label" for="gdprDeletion">Delete my data</label>
            </div>
            <div class="form-check ms-2">
              <input class="form-check-input" type="checkbox" value="Portability" id="gdprPortability" name="request_types">
              <label class="form-check-label" for="gdprPortability">Portability (export my data)</label>
            </div>
            <div class="form-check ms-2">
              <input class="form-check-input" type="checkbox" value="Objection" id="gdprObjection" name="request_types">
              <label class="form-check-label" for="gdprObjection">Object to processing/marketing</label>
            </div>
            <div class="mb-3 mt-3">
              <label for="gdprMessage" class="form-label text-gold">Additional Notes (optional)</label>
              <textarea class="form-control" id="gdprMessage" name="notes" rows="2"></textarea>
            </div>
          </div>
          <div class="modal-footer border-0">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-glass-gold">Send Request</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

{% block extra_scripts %}
<script src="{% static 'js/whatsapp.js' %}"></script>
<script src="{% static 'js/script.js' %}"></script>
{% endblock %}

{% endblock content %}
