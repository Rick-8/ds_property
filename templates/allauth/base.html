{% load static %}
{% load i18n %}
{% load widget_tweaks %}
{% load allauth %}

<!DOCTYPE html>
<html lang="en">

<head>
    {% block meta %}
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- SEO: Meta Title & Description -->
    <title>
        {% block extra_title %}
        DS Property Maintenance | Home, Pool, Lawn & Garden Services Florida
        {% endblock %}
    </title>
    <meta name="description"
        content="Keep your Florida property beautiful with DS Property Maintenance. We provide monthly pool cleaning, home improvement, lawn care, garden landscaping, and customizable service plans for homeowners, landlords, and HOAs in Florida. Trusted, reliable, and professional." />

    <!-- SEO: Meta Keywords -->
    <meta name="keywords"
        content="property maintenance Florida, pool cleaning, garden landscaping, home improvement, lawn care, Splash Zone Pools, Border 2 Border, property management, monthly maintenance, subscription services, DS Property Group, handyman Florida, lawn care plans, affordable pool cleaning Florida, garden design, repair services, emergency pool repair, property management for landlords" />

    <meta name="author" content="DS Property Group" />

    <!-- OpenGraph for social sharing -->
    <meta property="og:type" content="website" />
    <meta property="og:title"
        content="DS Property Maintenance - Florida's Trusted Property & Pool Maintenance Experts" />
    <meta property="og:description"
        content="Property and pool maintenance, garden landscaping, and home improvement services in Florida. Expert monthly plans for homeowners, landlords, and HOAs." />
    <meta property="og:image" content="{% static 'images/seo-preview.jpg' %}" />
    <meta property="og:url" content="https://www.dspropertygroup.com/" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="DS Property Maintenance | Home, Pool & Lawn Services Florida" />
    <meta name="twitter:description"
        content="Monthly pool cleaning, garden landscaping, and property management in Florida. Subscriptions and custom quotes available." />
    <meta name="twitter:image" content="{% static 'images/seo-preview.jpg' %}" />

    <!-- Canonical URL -->
    <link rel="canonical" href="https://ds-property-group-04ec2ca20d25.herokuapp.com/" />

    <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "What property maintenance services do you offer in Florida?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "We offer monthly pool cleaning, lawn care, garden landscaping, handyman repairs, and customizable maintenance packages for homeowners, landlords, and HOAs throughout Florida."
      }
    },
    {
      "@type": "Question",
      "name": "How much does monthly pool cleaning cost?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Our pool cleaning plans start at affordable rates for regular maintenance. Contact us or request a custom quote online for detailed pricing."
      }
    },
    {
      "@type": "Question",
      "name": "Do you offer property maintenance packages for landlords?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes, we provide tailored maintenance packages for landlords and rental properties, including regular inspections, repairs, and landscaping to keep your investment in top shape."
      }
    },
    {
      "@type": "Question",
      "name": "Can I sign up for services online?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Absolutely! You can browse service packages, request quotes, and subscribe to monthly maintenance plans directly through our website."
      }
    },
    {
      "@type": "Question",
      "name": "What areas of Florida do you serve?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "We proudly serve customers throughout Florida, including [insert your city/region names here for better local SEO]."
      }
    },
    {
      "@type": "Question",
      "name": "Are your staff insured and background checked?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes, all of our property maintenance staff are fully insured and background checked for your peace of mind."
      }
    }
  ]
}
</script>
    <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "LocalBusiness",
  "name": "DS Property Maintenance",
  "image": "https://ds-property-group-04ec2ca20d25.herokuapp.com/static/media/dsproperty-logo.png",
  "telephone": "+1-386-566-4027",
  "email": "info@dsproperty.com",
  "address": {
    "@type": "PostalAddress",
    "streetAddress": "123 Main St",
    "addressLocality": "Orlando",
    "addressRegion": "FL",
    "postalCode": "32801",
    "addressCountry": "US"
  },
  "url": "https://ds-property-group-04ec2ca20d25.herokuapp.com/",
  "openingHours": ["Mo-Fr 08:00-18:00"],
  "priceRange": "$$"
}
</script>

    {% endblock %}

    {% block corecss %}
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'media/favicon-32x32.png' %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'media/favicon-16x16.png' %}">
    <link rel="shortcut icon" href="{% static 'media/favicon.ico' %}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" media="print"
        onload="this.media='all'">
    <noscript>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    </noscript>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
        media="print" onload="this.media='all'">
    <noscript>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    </noscript>

    {% endblock %}

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Exo:wght@400;600;800&display=swap" rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Fjalla+One&family=Playfair+Display+SC:wght@400;700;900&display=swap"
        rel="stylesheet" />
    <link rel="stylesheet" href="{% static 'css/style.css' %}" media="print" onload="this.media='all'">
    <noscript>
        <link rel="stylesheet" href="{% static 'css/style.css' %}">
    </noscript>


    {% if user.is_authenticated and user.is_staff %}
    <link rel="manifest" href="{% url 'manifest' %}">
    <meta name="theme-color" content="#1a1a1a">
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register("/serviceworker.js")
                .then(reg => console.log("Service worker registered:", reg))
                .catch(err => console.error("Service worker registration failed:", err));
        }
    </script>
    {% endif %}
</head>

<body class="d-flex flex-column min-vh-100">
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            fetch("/", { method: "GET", credentials: "same-origin" });
        });
    </script>

    <form style="display: none;">{% csrf_token %}</form>

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg dark-opaque-nav fixed-top">
        <div class="container-fluid d-flex justify-content-between align-items-center">
            <a class="navbar-brand d-flex align-items-center" href="{% url 'home' %}">
                <img src="{% static 'media/dsproperty-logo.png' %}"
                    alt="DS Property Maintenance Logo - Florida Home, Pool & Lawn Experts"
                    class="navbar-logo img-fluid rounded-circle me-2" width="120" height="120" />
            </a>
            <div class="d-flex align-items-center gap-3">
                <div class="d-none d-lg-flex nav-large-links">
                    <a href="{% url 'servicepackage_list' %}" class="nav-link text-warning">Memberships</a>
                    <a href="{% url 'request_quote' %}" class="nav-link text-info">Job Quote</a>
                </div>
                <button class="btn btn-outline-light border-0 menu-toggle-btn" type="button" data-bs-toggle="offcanvas"
                    data-bs-target="#sidebarOffcanvas" aria-controls="sidebarOffcanvas" title="Open Menu">
                    <i class="bi bi-list"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Sidebar Offcanvas -->
    <div class="offcanvas offcanvas-end offcanvas-custom backdrop-blur position-fixed top-0 end-0" tabindex="-1"
        id="sidebarOffcanvas" aria-labelledby="sidebarLabel">
        <div class="offcanvas-gold-line"></div>
        <div class="offcanvas-header justify-content-between align-items-start">
            <h5 class="offcanvas-title large-gold-text" id="sidebarLabel">Menu</h5>
            {% if user.is_authenticated and user.is_staff %}
            <li class="nav-item mt-3">
                <button id="pwa-install-btn" class="btn btn-outline-warning w-100" style="display: none;">
                    Install Staff App <i class="fa-solid fa-download"></i>
                </button>
            </li>
            <li class="nav-item mt-2">
                <a href="#" onclick="localStorage.removeItem('dsPwaBannerDismissed'); location.reload();"
                    class="nav-link text-warning text-center">
                    <i class="fa-solid fa-download"></i>
                </a>
            </li>
            {% endif %}
            <button type="button" class="btn gold-close border-0 bg-transparent fs-3 ms-auto"
                data-bs-dismiss="offcanvas" aria-label="Close">
                <i class="fa-solid fa-x"></i>
            </button>
        </div>
        <div class="offcanvas-body position-relative" style="z-index: 2;">
            <ul class="nav flex-column">
                {% if user.is_authenticated %}
                <li class="nav-item"><a href="{% url 'servicepackage_list' %}" class="nav-link text-warning">Service
                        Packages</a></li>
                <li class="nav-item"><a href="{% url 'account_dashboard' %}" class="nav-link text-light">Dashboard</a>
                </li>
                <li class="nav-item"><a href="{% url 'view_profile' %}" class="nav-link text-light">My Profile</a></li>
                <li class="nav-item"><a href="{% url 'list_properties' %}" class="nav-link text-light">My Properties</a>
                </li>
                {% endif %}
                <li class="nav-item"><a href="{% url 'servicepackage_list' %}"
                        class="nav-link text-light">Memberships</a></li>
                <li class="nav-item"><a href="{% url 'request_quote' %}" class="nav-link text-light">Job Quote</a></li>
                <li class="nav-item"><a href="{% url 'border-2-border' %}" class="nav-link green">Border 2 Border</a>
                </li>
                <li class="nav-item"><a href="{% url 'splashzone_pools' %}" class="nav-link blue">Splash Zone Pools</a>
                </li>
                <li class="nav-item mt-2">
                    {% if user.is_authenticated %}
                    <form method="POST" action="{% url 'account_logout' %}">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-outline-warning w-100">Logout</button>
                    </form>
                    {% else %}
                    <a href="{% url 'account_login' %}" class="btn btn-outline-gold w-100 mb-2">Login</a>
                    <a href="{% url 'account_signup' %}" class="btn btn-outline-gold w-100">Register</a>
                    {% endif %}
                </li>
            </ul>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container-fluid mt-5 pt-3 flex-fill">
        <main class="mt-3">
            {% block content %}{% endblock %}
        </main>
    </div>

    {% if messages %}
    <div class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 1100; margin-top: 70px;">
        {% for message in messages %}
        <div class="toast show shadow mb-2" style="background-color: rgba(0, 0, 0, 0.4); border: 2px solid gold;">
            <div class="d-flex">
                <div class="toast-body">{{ message }}</div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"
                    aria-label="Close"></button>
            </div>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <!-- WhatsApp Button -->
    <div class="whatsapp-popup" id="whatsapp-popup">
        <a href="https://wa.me/13865664027?text=Hi%20there" target="_blank" class="whatsapp-button"
            aria-label="Chat on WhatsApp - DS Property Maintenance Florida">
            <img src="{% static 'media/Digital_Glyph_Green.png' %}"
                alt="WhatsApp Icon for DS Property Maintenance - Contact Florida Property Experts" class="whatsapp-icon"
                width="48" height="48" />

        </a>
        <div class="whatsapp-text">Chat or Call</div>
        <button class="whatsapp-close" id="close-whatsapp" aria-label="Close WhatsApp chat popup">&times;</button>
    </div>

    {% block extra_content %}
    {% endblock %}

    {% if user.is_authenticated and user.is_staff %}
    <div id="pwa-install-banner"
        class="d-none position-fixed bottom-0 start-0 end-0 bg-dark text-white p-3 shadow-lg zindex-sticky"
        style="z-index:1050;">
        <div class="d-flex justify-content-between align-items-center">
            <span><strong>Install the Staff App</strong> for quicker access.</span>
            <div>
                <button onclick="installPWA()" class="btn btn-sm btn-warning me-2">Install</button>
                <button onclick="dismissBanner()" class="btn btn-sm btn-outline-light">Dismiss</button>
            </div>
        </div>
    </div>
    {% endif %}
    <!-- Footer -->
    <footer class="dark-opaque text-white py-1 mt-auto">
        <div class="container">
            <div
                class="d-flex flex-column flex-sm-row justify-content-between align-items-center text-center text-sm-start gap-2">
                <div>
                    <a href="https://www.facebook.com/border2borderlandscapes" class="mx-2 text-decoration-none"
                        target="_blank" title="Facebook - Border 2 Border Landscaping Florida">
                        <span class="text-white d-flex align-items-center">
                            Check us out! <i class="fab fa-facebook-f ms-2 text-primary"></i>
                        </span>
                    </a>
                </div>
                <p class="mb-0 small">&copy; 2025 DS Property Maintenance. All rights reserved.</p>
                <div>
                    <a href="{% url 'contact' %}" class="text-warning text-decoration-none fw-bold"
                        title="{% trans 'Contact Us' %}">{% trans "Contact Us" %}</a>
                    <span class="text-light-50 mx-1">|</span>
                    <a href="{% url 'privacy_policy' %}" class="text-warning text-decoration-none fw-bold"
                        title="Privacy Policy">Privacy Policy</a>
                    <span class="text-light-50 mx-1">|</span>
                    <a href="{% url 'cookie_policy' %}" class="text-warning text-decoration-none fw-bold"
                        title="Cookie Policy">Cookie Policy</a>
                </div>
            </div>
        </div>
    </footer>


    <!-- Scripts -->
    <script src="https://kit.fontawesome.com/58851690d4.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://js.stripe.com/v3/"></script>
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
    {% block extra_scripts %}
    <script src="{% static 'js/whatsapp.js' %}" defer></script>
    <script src="{% static 'js/script.js' %}" defer></script>
    <script src="{% static 'staff_pwa/js/pwa-install.js' %}" defer></script>
    <script src="{% static 'js/main.js' %}" defer></script>
    <script src="{% static 'staff_pwa/js/push-notifications.js' %}" defer></script>
    {% endblock %}
    {% block extra_js %}{% endblock %}
</body>

</html>